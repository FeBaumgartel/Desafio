<html>
    <body>
        <input type="hidden" id="id">
        Name: <input type="text" id="name">
        Weight: <input type="text" id="weight">
        Value: <input type="text" id="value">
        Inventory: <input type="text" id="inventory">

        <button id="save">save</button>
    </body>
</html>

<script src="../js/jquery.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script type="text/javascript">
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const id = urlParams.get('id')

    $(document).ready(function(){
        if(id){
            axios.get("http://127.0.0.1:8000/api/products/"+id).then(function(data){
                $("#id").val(id)
                $("#name").val(data.data.name)
                $("#weight").val(data.data.weight)
                $("#value").val(data.data.value)
                $("#inventory").val(data.data.inventory)
            })
        }
    })

    $("#save").click(function (){
        if(id){
            axios.patch("http://127.0.0.1:8000/api/products/"+id, {
                name:$("#name").val(),
                weight:$("#weight").val(),
                value:$("#value").val(),
                inventory:$("#inventory").val()
            }).then(function(data){
                window.location.href = 'list.html';
            })
        }else{
            axios.post("http://127.0.0.1:8000/api/products", {
                name:$("#name").val(),
                weight:$("#weight").val(),
                value:$("#value").val(),
                inventory:$("#inventory").val()
            }).then(function(data){
                window.location.href = 'list.html';
            })
        }
    })

</script>